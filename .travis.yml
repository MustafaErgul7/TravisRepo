language: scala
os:
- linux
dist: trusty
sudo: true
scala:
- 2.12.4
jdk:
- oraclejdk8
addons:
  postgresql: '12'
  apt:
    packages:
    - postgresql-12-postgis-3
services:
- redis
- memcached
- docker
before_install:
- sudo sed -i -e '/local.*peer/s/postgres/all/' -e 's/peer\|md5/trust/g' /etc/postgresql/*/main/pg_hba.conf
- sudo service postgresql restart
- sleep 1
before_script:
- psql -c 'CREATE DATABASE "RabbleAPI_test";' -U postgres
- psql -d RabbleAPI_test -f db/structure.sql
- cd ..
- java -version
